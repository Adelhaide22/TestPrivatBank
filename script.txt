drop database applications_db
go

create database applications_db
go

use applications_db;
go

create table Application
(
    RequestId int identity primary key,
    ClientId int,
    DepartmentAddress nvarchar(30),
    Amount money not null,
    Currency nvarchar(3) not null,
    State nvarchar(15) not null
);
go

create procedure AddApplication
    @ClientId int,
    @DepartmentAddress nvarchar(30),
    @Amount money,
    @Currency nvarchar(3),
    @State nvarchar(15)
as
insert into Application(ClientId, DepartmentAddress, Amount, Currency, State) 
values(@ClientId, @DepartmentAddress, @Amount, @Currency, @State)
select SCOPE_IDENTITY()

go
create procedure GetApplicationByRequestId 
    @RequestId int
as
select Amount, Currency, State
from Application
where RequestId = @RequestId

go
create procedure GetApplicationByClientId 
    @ClientId int,
    @DepartmentAddress nvarchar(30)
as
select Amount, Currency, State
from Application
where ClientId = @ClientId 
and DepartmentAddress = @DepartmentAddress

go
